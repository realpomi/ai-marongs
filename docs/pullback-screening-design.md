# 눌림목 스크리닝 설계

## 개요

미국 주식 눌림목(Pullback) 종목을 스크리닝하기 위한 데이터 수집 및 분석 설계.

## 데이터 수집

### 수집 대상
- **데이터 종류**: 일봉 OHLCV (시가/고가/저가/종가/거래량)
- **시장**: 미국 정규장만 (프리마켓/애프터마켓 제외)
- **API**: 한국투자증권 API

### 수집 주기

| 구분 | 시점 | 수집량 |
|-----|------|-------|
| **초기 수집** | 티커 등록 시 | 1년치 (360일) |
| **정기 수집** | 하루 1회 | 당일 1건 |

### 정기 수집 시간
- **한국시간 오전 7~10시** (미국 장 마감 후)
- 미국 동부시간 기준 오후 5~8시 (애프터마켓 종료 후)

## 분석 지표

### 이동평균선

| 지표 | 계산 방법 | 용도 |
|-----|----------|-----|
| **20일 이동평균 (MA20)** | 최근 20일 종가 평균 | 단기 추세 |
| **60일 이동평균 (MA60)** | 최근 60일 종가 평균 | 중기 추세 |

### 추세 판단
```
상승 추세: MA20 > MA60
하락 추세: MA20 < MA60
```

### 눌림 비율
```
눌림 비율 = (고점 - 현재가) / 고점 × 100
```
- 고점 기준: 최근 N일 고점 또는 52주 고점

### 거래량 분석
```
거래량 비율 = 최근 5일 평균 거래량 / 20일 평균 거래량
```
- 거래량 비율 < 1 → 매도세 약화 (긍정적)
- 거래량 비율 > 1 → 매도세 강함 (주의)

## 눌림목 스크리닝 조건

이상적인 눌림목 진입 조건:

| 조건 | 기준 | 설명 |
|-----|------|-----|
| ✅ 상승 추세 | MA20 > MA60 | 중기 상승 추세 확인 |
| ✅ 눌림 비율 | 5% ~ 15% | 적정 조정 폭 |
| ✅ 거래량 감소 | 거래량 비율 < 1 | 건강한 조정 |
| ✅ 지지선 근처 | 현재가 ≈ MA20 | 반등 가능 지점 |
| ✅ 조정 기간 | 1~3주 | 너무 짧거나 길지 않음 |

## 중장기 추세 매매 전략

### 목표 패턴

```
[2~4주 꾸준한 상승] → [눌림] → [진입] → [1~2달 홀딩] → [100~200% 수익]
```

하루짜리 급등이 아닌 **추세를 타고 가는 매매**를 목표로 함.

### 왜 일봉 기반으로 충분한가

| 특징 | 설명 |
|-----|------|
| 2~4주 상승 | MA20 > MA60으로 확인 가능 |
| 눌림 구간 | 며칠~1주 조정 → 알림 받고 진입할 시간 충분 |
| 1~2달 홀딩 | 하루 급등/급락에 휘둘릴 필요 없음 |

### 강화된 스크리닝 조건

| 조건 | 기준 | 설명 |
|-----|------|-----|
| ✅ 상승 추세 | MA20 > MA60 | 중기 상승 추세 유지 |
| ✅ 꾸준한 상승 | 최근 20일 상승률 > 30% | 급등 후 조정이 아닌 꾸준한 상승 |
| ✅ 눌림 비율 | 10% ~ 20% | 충분한 조정 (너무 깊으면 추세 붕괴) |
| ✅ 거래량 감소 | 거래량 비율 < 1 | 매도세 약화 |
| ✅ 조정 기간 | 3~7일 | 너무 짧으면 노이즈, 길면 추세 약화 |

### 한계

| 케이스 | 포착 가능 여부 |
|-------|:------------:|
| 며칠간 눌림 → 반등 | ✅ |
| 하루 급락 → 며칠 횡보 → 반등 | ✅ |
| 하루 안에 눌림 → 급등 | ❌ |

하루 만에 눌렸다가 급등하는 경우는 일봉 기반으로 잡을 수 없음.
이런 종목은 뉴스/이슈 기반이라 예측도 어려움.

## 추가 저장 데이터

| 항목 | 용도 |
|-----|------|
| **52주 고점** | 눌림 비율 계산 기준 |
| **52주 저점** | 지지선 참고 |
| **고점 도달일** | 조정 기간 계산 |

## 참고: 프리마켓/애프터마켓 제외 이유

1. **눌림목 분석은 정규장 데이터로 충분**
   - 이동평균선, 지지선 모두 정규장 가격 기준
   - 거래량 90% 이상이 정규장에서 발생

2. **시간외 데이터의 한계**
   - 거래량 적고 스프레드 넓음
   - 개인 투자자가 해당 가격에 체결하기 어려움

3. **효율성**
   - API 호출 횟수 절감
   - 노이즈 제거

## 워크플로우

```
1. 장 마감 후 데이터 수집 (한국시간 오전)
2. 눌림목 조건 스크리닝
3. 조건 충족 종목 리스트업
4. 직접 차트 확인 및 최종 판단
5. 관심 종목 실시간 모니터링 (증권사 앱)
```
